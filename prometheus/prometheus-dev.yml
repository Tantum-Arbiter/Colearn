global:
  scrape_interval: 10s
  evaluation_interval: 10s

# Alertmanager configuration
alerting:
  alertmanagers:
    - static_configs:
        - targets:
            - alertmanager:9093

# Load alert rules
rule_files:
  - /etc/prometheus/alerts/*.yml

scrape_configs:
  - job_name: prometheus
    metrics_path: /metrics
    static_configs:
      - targets:
          - localhost:9090
  - job_name: 'service-metrics'
    scrape_interval: 10s
    metrics_path: /metrics
    static_configs:
      - targets:
        - localhost:8080 
  - job_name: 'docker-spring-boot-apps'
    metrics_path: '/private/prometheus'
    docker_sd_configs:
      - host: "unix:///var/run/docker.sock"
    relabel_configs:
      - source_labels: [__meta_docker_container_label_prometheus_scrape]
        action: keep
        regex: true
      - source_labels: [__meta_docker_container_id]
        target_label: container_id 
      - source_labels: [__meta_docker_container_name]
        target_label: container_name  
      - source_labels: [__meta_docker_container_network_mode]
        action: drop
        regex: host 